# AlphaValidation 모듈

## 목적

**"이 알파가 진짜인가?"**를 통계적으로 검증합니다.

백테스트 수익률이 좋아 보여도 **운(Luck)**일 수 있습니다. 이 모듈은 과학적 검증을 제공합니다.

---

## 핵심 질문

| 질문 | 검증 방법 |
|------|-----------|
| 알파가 0이 아닌가? | t-검정 |
| 우연이 아닌가? | p-value |
| 과적합인가? | IS vs OOS 비교 |
| 모든 시장 상황에서 유효한가? | 레짐별 분석 |

---

## 핵심 기능

### 1. 알파 유의성 검정

**귀무가설**: Alpha = 0 (시장 대비 초과수익 없음)

| 결과 | t-stat | p-value | 해석 |
|------|--------|---------|------|
| 유의함 | > 2.0 | < 0.05 | 알파가 존재할 가능성 높음 |
| 유의하지 않음 | < 2.0 | > 0.05 | 운일 가능성 |

### 2. 레짐별 분석

**시장 상황별 성과 확인**:

| 레짐 | 설명 | 확인 사항 |
|------|------|-----------|
| **Risk-on** | 상승장 | 수익률 양수? |
| **Risk-off** | 하락장 | 방어력 있음? |
| **Neutral** | 횡보장 | 안정적? |

### 3. 과적합 테스트

**In-Sample vs Out-of-Sample 비교**:

```
IS Sharpe: 2.5  →  학습 기간 성과
OOS Sharpe: 0.8  →  실제 기간 성과
Degradation: 68%  →  성과 저하율 (높으면 과적합)
```

| 저하율 | 평가 |
|--------|------|
| < 20% | 양호 |
| 20-50% | 주의 |
| > 50% | 과적합 의심 |

### 4. Deflated Sharpe Ratio

**다중검정 보정**:

여러 전략을 테스트하면 **우연히** 좋은 결과가 나올 확률이 높아짐.

- 10개 전략 테스트 → 1개는 우연히 Sharpe > 1
- 100개 전략 테스트 → 5개는 우연히 Sharpe > 1.5

**DSR**은 이를 보정하여 **진짜** 좋은 전략만 선별.

---

## 팩터 기여도 분석

**"어떤 팩터가 수익에 기여했나?"**

| 팩터 | 기여도 | t-stat | 해석 |
|------|--------|--------|------|
| Momentum | 3.2% | 2.8 | 유의미한 기여 |
| Value | 1.1% | 1.2 | 기여 불확실 |
| Quality | -0.5% | -0.8 | 기여 없음 |

---

## 강건성 검증

### 파라미터 민감도

"파라미터를 약간 바꾸면 결과가 크게 달라지나?"

- 민감도 높음 → 과적합 가능성
- 민감도 낮음 → 강건한 전략

### 기간별 안정성

"특정 기간에만 잘 작동하나?"

- 모든 기간 양호 → 강건
- 특정 기간만 양호 → 시장 상황 의존

---

## 결과 해석 가이드

| 조건 | 결론 |
|------|------|
| p-value < 0.05, OOS 저하 < 30% | **알파 존재 가능성 높음** |
| p-value < 0.05, OOS 저하 > 50% | 과적합 의심, 파라미터 재검토 |
| p-value > 0.05 | 알파 불확실, 전략 재설계 필요 |

---

## 입출력 요약

| 입력 | 출력 |
|------|------|
| 수익률 + 벤치마크 | AlphaTestResult (alpha, t-stat, p-value) |
| 수익률 + 레짐 라벨 | 레짐별 성과 리스트 |
| IS 수익률 + OOS 수익률 | 과적합 지표 |

---

## 관련 모듈

- **이전 단계**: [04_metrics.md](04_metrics.md) - 성과 지표 계산
- **다음 단계**: [06_report.md](06_report.md) - 리포트 생성
